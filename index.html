<!-- بداية الكود -->
<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <title>Kudu Call Center Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body, html { margin: 0; padding: 0; height: 100%; font-family: Arial; direction: rtl; }
    #map { width: 100%; height: 100vh; }
    .leaflet-tooltip {
  font-weight: bold;
  background: transparent !important;
  color: black !important;
  border: none !important;
  box-shadow: none !important;
  font-size: 10px; /* صغرته من 13px لـ 10px */
  padding: 0;
  white-space: nowrap;
}

    .search-box {
      position: absolute; top: 10px; right: 10px; z-index: 1100;
      background: #e0f7fa; padding: 10px; border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      width: 160px;
      overflow-y: auto;
      max-height: 95vh;
      border: 1px solid rgba(0,0,0,0.1);
    }
    .filter-section { margin-top: 8px; }
    .filter-buttons { display: flex; flex-wrap: wrap; gap: 4px; }
    .filter-buttons button {
      flex: 1;
      padding: 6px 8px;
      border: none;
      background: #eee;
      cursor: pointer;
      border-radius: 4px;
      font-weight: bold;
      transition: background-color 0.3s;
    }
    .filter-buttons button.active,
    .filter-buttons button:hover {
      background-color: #4CAF50;
      color: white;
    }
    select, input[type="text"] {
      width: 100%;
      margin-top: 6px;
      padding: 6px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background-color: #ffffff;
    }
    table {
      border-collapse: collapse;
      width: 180px;
      font-size: 9px;
      font-weight: bold;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 4px;
      font-weight: bold;
    }
    th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>

<!-- Search box and filters -->
<div class="search-box">
  <input type="text" id="search" placeholder="Search" onkeyup="filterBranches()" />
  <div class="filter-section">
    <label for="statusFilter"><b>Branches status</b></label>
    <select id="statusFilter" onchange="filterBranches()">
      <option value="All">All</option>
      <option value="Open">Open</option>
      <option value="New Store">New Store</option>
      <option value="Replaced">Replaced</option>
      <option value="Not connected">Not connected</option>
      <option value="Permanently Closed">Permanently Closed</option>
      <option value="Temporarily Closed">Temporarily Closed</option>
    </select>
  </div>
  <div class="filter-section">
    <label for="deliveryFilter"><b>Delivery service</b></label>
    <select id="deliveryFilter" onchange="filterBranches()">
      <option value="All">All</option>
      <option value="Yes">Available</option>
      <option value="No">Unavailable</option>
    </select>
  </div>
  <div class="filter-section">
    <label for="brandFilter"><b>Brand</b></label>
    <select id="brandFilter" onchange="filterBranches()">
      <option value="All">All</option>
      <option value="Kudu">Kudu</option>
      <option value="Al Khafeef">Al Khafeef</option>
      <option value="Franchise">Franchise</option>
    </select>
  </div>
  <div class="filter-section">
    <label for="deliveryServiceFilter"><b>Delivery provider</b></label>
    <select id="deliveryServiceFilter" onchange="filterBranches()">
      <option value="All">All</option>
      <option value="Holouly service">Holouly service</option>
    </select>
  </div>
  <div class="filter-section">
    <label for="OperatingdetailsFilter"><b>Operating details</b></label>
    <select id="OperatingdetailsFilter" onchange="filterBranches()">
      <option value="All">All</option>
      <option value="Pickup only - Mall">Pickup only - Mall</option>
    </select>
  </div>
</div>

<!-- Branches map -->
<div id="map"></div>

<!-- Map and branches script -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  const map = L.map("map").setView([24.7, 46.7], 11);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  const branches = [
    {
      StoreName: "KR-01", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/z5qVe8Y2Ecvvdyyq6", Latitude: 24.6850636000001, Longitude: 46.6778853000002
    },
    {
      StoreName: "KR-02", Status: "Permanently Closed", Delivery: "No", Brand: "Kudu", DeliveryService: "",
      Saturday: "-", Sunday: "-", Monday: "-", Tuesday: "-", Wednesday: "-", Thursday: "-", Friday: "-", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/khRU8GrtAtrFUchh9", Latitude: 24.70202977, Longitude: 46.69658292
    },
    {
      StoreName: "KR-03", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/Re3Yi1neHt1RCkbd7", Latitude: 24.6850636000001, Longitude: 46.6778853000002
    },
    {
      StoreName: "KR-04", Status: "Permanently Closed", Delivery: "No", Brand: "Kudu", DeliveryService: "",
      Saturday: "-", Sunday: "-", Monday: "-", Tuesday: "-", Wednesday: "-", Thursday: "-", Friday: "-", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/CX3dQbHM1QMtD8cf8", Latitude: 24.7331263055716, Longitude: 46.6781115571678
    },
    {
      StoreName: "KR-05", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/Kc8Ddkp19QxRFpDw5", Latitude: 24.7299943948402, Longitude: 46.7848145964603
    },
    {
      StoreName: "KR-06", Status: "Permanently Closed", Delivery: "No", Brand: "Kudu", DeliveryService: "",
      Saturday: "-", Sunday: "-", Monday: "-", Tuesday: "-", Wednesday: "-", Thursday: "-", Friday: "-", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/yjMQxRuU5WDuiPGL8", Latitude: 24.5937764353634, Longitude: 46.6332205754896
    },
    {
      StoreName: "KR-07", Status: "Open", Delivery: "No", Brand: "Kudu", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/zzJNSvfHV9A6c5bT8", Latitude: 24.6626985826866, Longitude: 46.7010481776503
    },
    {
      StoreName: "KR-08", Status: "Open", Delivery: "No", Brand: "Kudu", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/FCiG9HE46QZwnK5UA", Latitude: 24.6963456368794, Longitude: 46.7515047849539
    },
    {
      StoreName: "KR-09", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/FRpEj1XXVK93iLjy6", Latitude: 24.7431913764908, Longitude: 46.8088182933302
    },
    {
      StoreName: "KR-10", Status: "Permanently Closed", Delivery: "No", Brand: "Kudu", DeliveryService: "",
      Saturday: "-", Sunday: "-", Monday: "-", Tuesday: "-", Wednesday: "-", Thursday: "-", Friday: "-", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/6rgXPWUNzyU3yvAs8", Latitude: 24.7239820272543, Longitude: 46.6538244999931
    },
    {
      StoreName: "KR-11", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/ora13eiMyEPy55yR6", Latitude: 24.7595151272408, Longitude: 46.7778204810113
    },
    {
      StoreName: "KR-12", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/jsLCcxUJE4RZro1h8", Latitude: 24.598699070287, Longitude: 46.6894283222643
    },
    {
      StoreName: "KR-13", Status: "Open", Delivery: "Yes", Brand: "Kudu", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "1:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/bX2iXM244q9EiqMH9", Latitude: 24.6254874313683, Longitude: 46.6891265920741
    },
    {
      StoreName: "KR-14", Status: "Open", Delivery: "No", Brand: "Kudu", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "Closed", Sunday: "07:15 AM - 06:45 PM", Monday: "07:15 AM - 06:45 PM", Tuesday: "07:15 AM - 06:45 PM",
      Wednesday: "07:15 AM - 06:45 PM", Thursday: "07:15 AM - 06:45 PM", Friday: "Closed", Operatingdetails: "Pickup only - Mall",
      LinkLocation: "https://maps.app.goo.gl/KxynNakKthp6MbRu5", Latitude: 24.7059516366921, Longitude: 46.6794971999949
    },
    {
      StoreName: "AK-01", Status: "Open", Delivery: "No", Brand: "Al Khafeef", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/LHVWhsfyVEchRgwU8", Latitude: 24.693814870919, Longitude: 46.7322646950964
    },
    {
      StoreName: "AK-02", Status: "Open", Delivery: "No", Brand: "Al Khafeef", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/ABvoJUax48RF1TN47", Latitude: 24.7060825678959, Longitude: 46.8359318269587
    },
    {
      StoreName: "AK-04", Status: "Open", Delivery: "No", Brand: "Al Khafeef", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/EXTXoL5xofTAXrat6", Latitude: 24.7240437490245, Longitude: 46.6747060454056
    },
    {
      StoreName: "AK-06", Status: "Open", Delivery: "No", Brand: "Al Khafeef", DeliveryService: "", FirstOrder: "-", LastOrder: "-",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/BJcqEbhFgF2VWxaa8", Latitude: 24.6627661422275, Longitude: 46.7009782411122
    },
    {
      StoreName: "KF-01", Status: "Open", Delivery: "Yes", Brand: "Franchise", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "2:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/eD9ZtP7yUbJvUWds9", Latitude: 24.5777553293945, Longitude: 46.5803145999949
    },
    {
      StoreName: "KF-05", Status: "Open", Delivery: "Yes", Brand: "Franchise", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "2:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/LSaXgCjm1APkUCS2A", Latitude: 24.5997626938295, Longitude: 46.7460685650103
    },
    {
      StoreName: "KF-06", Status: "Open", Delivery: "Yes", Brand: "Franchise", DeliveryService: "", FirstOrder: "6:00 AM", LastOrder: "2:45 AM",
      Saturday: "05:00 AM - 04:00 AM", Sunday: "05:00 AM - 04:00 AM", Monday: "05:00 AM - 04:00 AM", Tuesday: "05:00 AM - 04:00 AM",
      Wednesday: "05:00 AM - 04:00 AM", Thursday: "05:00 AM - 04:00 AM", Friday: "05:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/1NnAawxGw9bTnsj37", Latitude: 24.7604067061064, Longitude: 46.8127219915571
     },
    {   
      StoreName: "KF-07", Status: "Open", Delivery: "Yes", Brand: "Franchise", DeliveryService: "", FirstOrder: "7:00 AM", LastOrder: "2:45 AM",
      Saturday: "06:00 AM - 04:00 AM", Sunday: "06:00 AM - 04:00 AM", Monday: "06:00 AM - 04:00 AM", Tuesday: "06:00 AM - 04:00 AM",
      Wednesday: "06:00 AM - 04:00 AM", Thursday: "06:00 AM - 04:00 AM", Friday: "06:00 AM - 04:00 AM", Operatingdetails: "",
      LinkLocation: "https://maps.app.goo.gl/iF7eDXcAZBDxdcoQ7", Latitude: 30.974840899324, Longitude: 41.0118080407078
    }
  ];

  let markers = [];

  function createMarker(branch) {
    const brandColors = {
      "Kudu": "blue",
      "Al Khafeef": "orange",
      "Franchise": "green"
    };
    const color = brandColors[branch.Brand] || "gray";

    const icon = L.divIcon({
      html: `<div style="background-color:${color};width:16px;height:16px;border-radius:50%;border:2px solid white;"></div>`,
      className: "",
      iconSize: [20, 20],
      iconAnchor: [10, 10]
    });

    const popupContent = `
      <table>
        <tr><th colspan="2">${branch.StoreName}</th></tr>
        <tr><td>Status</td><td>${branch.Status}</td></tr>
        <tr><td>Delivery</td><td>${branch.Delivery}</td></tr>
        <tr><td>Brand</td><td>${branch.Brand}</td></tr>
        <tr><td>Delivery provider</td><td>${branch.DeliveryService || '-'}</td></tr>
        <tr><td>First Order</td><td>${branch.FirstOrder || '-'}</td></tr>
        <tr><td>Last Order</td><td>${branch.LastOrder || '-'}</td></tr>
        <tr><td>Saturday</td><td>${branch.Saturday}</td></tr>
        <tr><td>Sunday</td><td>${branch.Sunday}</td></tr>
        <tr><td>Tuesday</td><td>${branch.Monday}</td></tr>
        <tr><td>Tuesday</td><td>${branch.Tuesday}</td></tr>
        <tr><td>Wednesday</td><td>${branch.Wednesday}</td></tr>
        <tr><td>Thursday</td><td>${branch.Thursday}</td></tr>
        <tr><td>Friday</td><td>${branch.Friday}</td></tr>
        <tr><td>Operating details</td><td>${branch.Operatingdetails || '-'}</td></tr>
        <tr><td colspan="2"><a href="${branch.LinkLocation}" target="_blank">Link Location</a></td></tr>
      </table>
    `;

    const marker = L.marker([branch.Latitude, branch.Longitude], { icon });
    marker.bindPopup(popupContent);
    marker.bindTooltip(branch.StoreName, { permanent: true, direction: "top" });
    return marker;
  }

  function addMarkers(filtered) {
    markers.forEach(m => map.removeLayer(m));
    markers = [];
    filtered.forEach(branch => {
      const marker = createMarker(branch);
      marker.addTo(map);
      markers.push(marker);
    });
  }

  function filterBranches() {
    const searchText = document.getElementById("search").value.trim().toLowerCase();
    const status = document.getElementById("statusFilter").value;
    const delivery = document.getElementById("deliveryFilter").value;
    const brand = document.getElementById("brandFilter").value;
    const deliveryService = document.getElementById("deliveryServiceFilter").value;
    const Operatingdetails = document.getElementById("OperatingdetailsFilter").value;

    const filtered = branches.filter(branch => {
      if (status !== "All" && branch.Status !== status) return false;
      if (delivery !== "All" && branch.Delivery !== delivery) return false;
      if (brand !== "All" && branch.Brand !== brand) return false;
      if (deliveryService !== "All" && branch.DeliveryService !== deliveryService) return false;
      if (Operatingdetails !== "All" && branch.Operatingdetails !== Operatingdetails) return false;
      if (searchText && !branch.StoreName.toLowerCase().includes(searchText)) return false;
      return true;
    });

    addMarkers(filtered);
  }

  addMarkers(branches);
</script>

</body>
</html>
